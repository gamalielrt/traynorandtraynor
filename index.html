<!DOCTYPE html>
<html lang="eng">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0,user-scalable=0"/>

        <link rel="stylesheet" href="main.css">
        <title>Traynor & Traynor V1</title>
    </head>

    <body>

        <script src="js/three.js"></script>
        <script src="js/MTLLoader.js"></script>
        <script src="js/OBJLoader.js"></script>
        <script src="js/OrbitControls.js"></script>
        <script src="js/postprocessing.js"></script>
        <script src="js/TweenMax.min.js"></script>

        <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.3/gsap.min.js"></script>


    
    

        <div id="buttons" >
            <img id="musicbutton" src="assets/symbol1.png" height="80" width="80" onClick="navigateToPage(1)">
            <!--<img id="visualbutton" src="assets/symbol2.png" height="80" width="80" onClick="navigateToPage(2)">-->
            <img id="aboutbutton" src="assets/symbol3.png" height="80" width="80" onClick="navigateToPage(2)">
            <img id="titlegif" src="assets/chromegif.png" height="100" width="100" onClick="navigateToPage(3)">

        </div>

        <div id="loadingbox">Loading</div>



       <!-- <div id="menubutton" onClick="activateMenu()">
            <img id="menuicon" src="assets/plus.png" width="20" height="20">
        </div>
        
        <div id="menu" hidden>
            <p onClick="navigateToPage(1)">Music</p>
            <p onClick="navigateToPage(2)">Visual</p>
            <p onClick="navigateToPage(3)">About</p>

        </div>-->

        <div id="contentcanvas">
            <main>
            <div id="visualcontent"  hidden> 
                <!--<section>
                    <div class="vpost" style="background-image: url('./assets/visualImages/fatdogposter.png');"> HJHJLJL</div>
                </section>    -->               
            </div>
        </main>


            <div id = contenttablemiddle >
                <div id = "pagecontent" >
            
                </div>
            </div> 
        </div>

        <script>

            var display;

            const isTouchDevice = () => {
                try {
                    document.createEvent("TouchEvent");
                    display = 'phone';
                } catch (e) {
                    display = 'computer'
                }
            };
            isTouchDevice();
            console.log(display);

            visualContent = document.getElementById("visualcontent");



            var menuOpen = false;

            function activateMenu() {
                switch (menuOpen) {
                    case false :
                        //console.log("menu is Open");
                        menuOpen = true;
                        document.getElementById("menu").style.display = 'block';
                        document.getElementById("menuicon").src = "assets/minus.png";
                        break;
                    case true :
                        //console.log("menu is Closed");
                        document.getElementById("menu").style.display = 'none';
                        document.getElementById("menuicon").src = "assets/plus.png";


                        menuOpen = false;
                        break;

                }
            }

            function navigateToPage(page) {

                switch (page) {

                    // Music

                    case (1) :


                        visualContent.style.display = 'none';

                        displayMusic();
                        calcAlbumSize();
                        //albumHover();
                        window.addEventListener('resize', calcAlbumSize, true);

                        document.getElementById("contenttablemiddle").style.left = '-4%';
                        document.getElementById("pagecontent").style.width = '100%';
                        document.getElementById("contenttablemiddle").style.paddingLeft = '3%';

                        //console.log(document.getElementById("contenttablemiddle").style.left, document.getElementById("pagecontent").style.width,document.getElementById("contenttablemiddle").style.paddingLeft)


                        THREEgoToMusic();



                        break;

                    // Visual


                    case (2) :


                        displayVisualPosts();


                        window.removeEventListener('resize', calcAlbumSize, true);

                        document.getElementById("pagecontent").style.textAlign = 'center';


                        document.getElementById("contenttablemiddle").style.left = '0';
                        document.getElementById("pagecontent").style.width = '96%';
                        document.getElementById("contenttablemiddle").style.paddingLeft = '2%';

                        THREEgoToVisual();









                        break;

                    // About


                    case (3) :


                    document.getElementById("pagecontent").innerHTML = '';
                    visualContent.style.display = 'none';



                    document.getElementById("pagecontent").innerHTML += '<br>';
                    document.getElementById("pagecontent").innerHTML += '<br>';
                    document.getElementById("pagecontent").innerHTML += '<br>';


                    document.getElementById("pagecontent").innerHTML += 'About';
                    window.removeEventListener('resize', calcAlbumSize, true);

                    document.getElementById("contenttablemiddle").style.left = '0';
                    document.getElementById("pagecontent").style.width = '96%';
                    document.getElementById("contenttablemiddle").style.paddingLeft = '2%';

                    THREEgoToAbout();




                    break;



                }
                

            }




            ///////////     VISUAL


            class VisualPost {
                constructor(ID, date, content, caption, type) {
                    this._ID = ID;
                    this._date = date;
                    this._content = content;
                    this._caption = caption;
                    this._type = type;
                }
                get ID() {
                    return this._ID;
                }
                get date() {
                    return this._date;
                }
                get content() {
                    return this._content;
                }
                get caption() {
                    return this._caption;
                }
                get type() {
                    return this._type;
                }
            }

            class VisualPosts {
                constructor() {
                    this.visualPosts = [];
                }

                newVisualPost (ID, date, content, caption, type) {
                    let a = new VisualPost(ID, date, content, caption, type);
                    this.visualPosts.push(a);
                    return a;
                }
                get numberOfVisualPosts () {
                    return this.visualPosts.length;
                }
            }

            visualPostList = new VisualPosts();

            //visualPostList.newVisualPost('0', '11/11/22', 'https://www.youtube.com/embed/4_QK8IxhZRg', 'Regressive Left - World on Fire Music Video', 'video');
            //visualPostList.newVisualPost('1', '16/11/22', 'https://www.youtube.com/embed/n27fAUG7Bok', 'Sweat - Be Complete Video', 'video');
            visualPostList.newVisualPost('4', '16/11/22', 'fatdogposter.png', 'Fat Dog Press Shot - CGI', 'image');
            visualPostList.newVisualPost('5', '16/11/22', 'becomplete.png', 'Fat Dog Press Shot - CGI', 'image');
            visualPostList.newVisualPost('6', '16/11/22', 'regressiveleft.png', 'Fat Dog Press Shot - CGI', 'image');
            visualPostList.newVisualPost('7', '16/11/22', 'thinair.png', 'Fat Dog Press Shot - CGI', 'image');


            //visualPostList.newVisualPost('3', '16/11/22', 'https://www.youtube.com/embed/pwZFlYmLuRw', 'Waterbaby - Thin Air Visualiser', 'video');



            //<iframe width="560" height="315" src="https://www.youtube.com/embed/-ACXhZ4OtAo" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>


            // Display Visual Posts

            function displayVisualPosts () {


                document.getElementById("pagecontent").innerHTML = '';

                visualContent.style.display = 'block';

                for (let i=0; i<visualPostList.numberOfVisualPosts; i++) {
                    visualContent.innerHTML += '<section><div class = vpost id = "vpcontdiv'+ i +'" style="background-image: url(./assets/visualImages/'+ visualPostList.visualPosts[i].content +');"></div></section>';


                }



                /*
                document.getElementById("pagecontent").innerHTML = '';

                document.getElementById("pagecontent").innerHTML += '<br>';
                document.getElementById("pagecontent").innerHTML += '<br>';
                document.getElementById("pagecontent").innerHTML += '<br>';


                for (let i=0; i<visualPostList.numberOfVisualPosts; i++) {

                    if (visualPostList.visualPosts[i].type == 'video') {

                        document.getElementById("pagecontent").innerHTML += '<div id = "vpcontdiv'+ i +'"></div>';

                        document.getElementById('vpcontdiv'+i).style.width = '60%';

                        document.getElementById('vpcontdiv'+i).style.paddingTop = '56.25%';
                        document.getElementById('vpcontdiv'+i).style.position = 'relative';
                        document.getElementById('vpcontdiv'+i).style.margin = '0 auto';


                        document.getElementById('vpcontdiv'+i).innerHTML += '<iframe  src="' + visualPostList.visualPosts[i].content +'"  frameborder="0" allowfullscreen style="position:absolute;top:0;left:0;width:100%;height:100%;"></iframe>';

                    } else if (visualPostList.visualPosts[i].type == 'image') {

                        document.getElementById("pagecontent").innerHTML += '<div class = vpost id = "vpcontdiv'+ i +'"></div>';


                        document.getElementById('vpcontdiv'+i).style.width = '50%';

                        document.getElementById('vpcontdiv'+i).style.paddingTop = '100%';
                        document.getElementById('vpcontdiv'+i).style.position = 'relative';
                        document.getElementById('vpcontdiv'+i).style.margin = '0 auto';
                        


                        //document.getElementById('vpcontdiv'+i).style.float = 'left';

                        document.getElementById("pagecontent").innerHTML += '<br>';
                        document.getElementById("pagecontent").innerHTML += '<br>';
                        document.getElementById("pagecontent").innerHTML += '<br>';

                        document.getElementById('vpcontdiv'+i).innerHTML = '<img src="assets/visualImages/' + visualPostList.visualPosts[i].content + '"style="position:absolute;top:0;left:0;width:100%;">';
                        
                        document.getElementById("pagecontent").innerHTML += '<br>';
                        document.getElementById("pagecontent").innerHTML += '<br>';
                        document.getElementById("pagecontent").innerHTML += '<br>';



                    }

                    document.getElementById("pagecontent").innerHTML += '<br>';
                    document.getElementById("pagecontent").innerHTML += '<br>';
                    document.getElementById("pagecontent").innerHTML += '<br>';

                    //document.getElementById("pagecontent").innerHTML += '<div id = "vpcapdiv'+ i +'">' + visualPostList.visualPosts[i].caption +'</div>';

                    document.getElementById("pagecontent").innerHTML += '<br>';
                    document.getElementById("pagecontent").innerHTML += '<br>';
                    document.getElementById("pagecontent").innerHTML += '<br>';





                }

                */



            }


            ///////////     ALBUMS




            class Album {
                constructor(artist, albumname, songs, credit, image) {
                    this._artist = artist;
                    this._albumname = albumname;
                    this._songs = songs;
                    this._credit = credit;
                    this._image = image;
                }
                get artist() {
                    return this._artist;
                }
                get albumname() {
                    return this._albumname;
                }
                get songs() {
                    return this._songs;
                }
                get credit() {
                    return this._credit;
                }
                get image() {
                    return this._image;
                }
            }

            class Albums {
                constructor() {
                    this.albums = [];
                }

                newAlbum (artist, albumname, songs, credit, image) {
                    let a = new Album(artist, albumname, songs, credit, image);
                    this.albums.push(a);
                    return a;
                }

                get numberOfAlbums () {
                    return this.albums.length;
                }
            }

            albumList = new Albums();

            albumList.newAlbum('The Beatles', 'Abbey Road', 'Somthing, Oh! Darling', 'Mix', 'abbeyroad.jpeg');
            albumList.newAlbum('Bob Dylan', 'Blonde on Blonde','Pledging My Time', 'Production', 'blondeonblonde.jpeg');
            albumList.newAlbum('Rod Stewart', 'Camoflage', 'Trouble', 'Drums', 'camoflage.jpeg');
            albumList.newAlbum('Limp Bizkit', 'Chocolate Starfish and the Hotdog Flavoured Water', 'Rollin', 'Cello', 'chocolatestarfish.jpeg');
            albumList.newAlbum('Brittney Spears', 'In the Zone', 'Breathe on Me', 'Mix', 'inthezone.jpeg');
            albumList.newAlbum('Prince', 'Purple Rain', 'Purple Rain', 'Backing Vocals', 'purplerain.jpeg');
            albumList.newAlbum('Primal Scream', 'Screamadelica', 'Loaded', 'Violin', 'screamadelica.png');
            albumList.newAlbum('James Brown', 'Sex Machine', 'Bewildered', 'Additional Production', 'sexmachine.jpeg');
            albumList.newAlbum('Michael Jackson', 'Thriller', 'PYT', 'Mix', 'thriller.jpeg');
            albumList.newAlbum('Neil Young', 'Tonights the Night', 'Tonights the Night', 'Production', 'tonightsthenight.jpeg');


            // Display albums

            const albumOpacity = '75%';


            function displayMusic() {

                if (display == 'computer') {

                    document.getElementById("pagecontent").style.textAlign = 'left';

                } else if (display == 'phone') {

                    document.getElementById("pagecontent").style.textAlign = 'center';

                }

                document.getElementById("pagecontent").innerHTML = '';

                document.getElementById("pagecontent").innerHTML += '<br>';


                for (let i=0; i<albumList.numberOfAlbums; i++ ) {
                    document.getElementById("pagecontent").innerHTML += '<div id = "aldiv'+ i +'"><img id="al'+ i +'" onClick= "getAlbumDetails('+ i + ')" onMouseOver="albumMouseOver(this)" onMouseOut="albumMouseOut(this)" src="assets/albumcovers/'+ albumList.albums[i].image +'"> </div>';

                    document.getElementById("aldiv" + i).style.display = 'inline-block';
                    //document.getElementById("aldiv" + i).style.border = '1px solid black';

                    document.getElementById("al" + i).style.position = 'relative';
                    document.getElementById("al" + i).style.opacity = albumOpacity;

                    if (display == 'computer') {

                        document.getElementById("pagecontent").innerHTML += '<br>';

                    }


                }
            }


            // Calculate random album placement

            /*


            const randomNumberL = [];
            const randomNumberT = [];

            for (let i=0; i<albumList.numberOfAlbums; i++) {

                randomNumberL.push(Math.floor(Math.random()*10));
                randomNumberT.push(Math.floor(Math.random()*10));

                //console.log(randomNumberT[i]);

            }

            */

            /*

            

            function albumHover () {
                for (let i=0; i<albumList.numberOfAlbums; i++) {

                    let tl = gsap.timeline();


                    
                    tl.to(document.getElementById("al"+[i]), { 
                        y: 10-randomNumberT[i],
                        duration: 2-(randomNumberT[i]/5), 
                        ease: "power4.inout"

                    })

                    .to(document.getElementById("al"+[i]), {
                        y: -randomNumberT[i], 
                        duration: 2, 
                        yoyo: true, repeat: -1,
                        ease: "power4.inout"

                    });

                    

                }
            }

            */

            // Resize albums to window


            function calcAlbumSize () {

                if (display == 'computer') {

                    var contentWidth = document.getElementById("contenttablemiddle").offsetWidth;
                
                    var albumFormat = {
                        columns : 1,
                        sideLength : 200
                    };



                    for (let i=0; i<albumList.numberOfAlbums; i++ ) {


                        document.getElementById("aldiv"+i).style.width = 180+'px';
                        document.getElementById("aldiv"+i).style.height = 180+'px';

                        document.getElementById("al"+i).width = 160;

                        document.getElementById("al" + i).style.left = 20 + 'px';
                        document.getElementById("al" + i).style.top = 20 + 'px';



                    }


                } else if (display == 'phone') {

                    var contentWidth = document.getElementById("contenttablemiddle").offsetWidth;
                    var albumFormat = {
                        columns : 0,
                        sideLength : 0
                    };

                    if (contentWidth <= 500) {

                        albumFormat.columns = 1;
                        albumFormat.sideLength = Math.floor(document.getElementById("contenttablemiddle").offsetWidth /1);

                    } else if (contentWidth > 500 && contentWidth <= 1000) {

                        albumFormat.columns = 2;
                        albumFormat.sideLength = Math.floor(document.getElementById("contenttablemiddle").offsetWidth /2);

                    }  else if (contentWidth > 1000 && contentWidth <= 1500) {

                        albumFormat.columns = 3;
                        albumFormat.sideLength = Math.floor(document.getElementById("contenttablemiddle").offsetWidth /3);

                    }  else if (contentWidth > 1500 ) {

                        albumFormat.columns = 4;
                        albumFormat.sideLength = Math.floor(document.getElementById("contenttablemiddle").offsetWidth /4);

                    } 



                    for (let i=0; i<albumList.numberOfAlbums; i++ ) {


                        document.getElementById("aldiv"+i).style.width = albumFormat.sideLength-17+'px';
                        document.getElementById("aldiv"+i).style.height = albumFormat.sideLength-17+'px';

                        document.getElementById("al"+i).width = albumFormat.sideLength-(albumFormat.sideLength/5);

                        document.getElementById("al" + i).style.left = 10 + 'px';
                        document.getElementById("al" + i).style.top = 10 + 'px';



                    }

                    //console.log(contentWidth,document.getElementById("aldiv1").style.width, albumFormat.sideLength);



                }


                //console.log(contentWidth,document.getElementById("aldiv1").style.width, albumFormat.sideLength);
            }

            //When album clicked

            function getAlbumDetails(value) {
                console.log('Artist:', albumList.albums[value].artist,', Album:', albumList.albums[value].albumname,', Song:',albumList.albums[value].songs ,', Credit:',albumList.albums[value].credit )
            }

            //When Mouse over Album

            function albumMouseOver (x) {
                x.style.opacity = '100%';
            }
            function albumMouseOut (x) {
                x.style.opacity = albumOpacity;
            }










        </script>

        <script src="./main.js"></script>
        <script src="./swipe.js"></script>

    </body>






</html>